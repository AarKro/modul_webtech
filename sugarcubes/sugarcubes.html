<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sugarcubes</title>
  <link rel="stylesheet" href="./sugarcubes.css" />
</head>

<body>
  
  <section class="background">
    <div class="background-grid">
      <!-- background grid items are inserted by js -->
    </div>
    <!-- 10 x 10 -->
    <div class="poster-grid">
      <!-- 1 -->
      <div class="grid-item"></div>
      <div class="grid-item"></div>
      <div class="grid-item"></div>
      <div class="grid-item"></div>
      <div class="grid-item"></div>
      <div class="grid-item"></div>
      <div class="grid-item"></div>
      <div class="grid-item"></div>
      <div class="grid-item"></div>
      <div class="grid-item"></div>

      <!-- 2 -->
      <div class="grid-item"></div>
      <div class="grid-item"></div>
      <div class="grid-item"></div>
      <div class="grid-item"></div>
      <div class="grid-item"></div>
      <div class="grid-item"></div>
      <div class="grid-item"></div>
      <div class="grid-item"></div>
      <div class="grid-item"></div>
      <div class="grid-item"></div>

      <!-- 3 -->
      <div class="grid-item"></div>
      <div class="grid-item"></div>
      <div class="grid-item"></div>
      <div class="grid-item"></div>
      <div class="grid-item"></div>
      <div class="grid-item"></div>
      <div class="grid-item"></div>
      <div class="grid-item"></div>
      <div class="grid-item"></div>
      <div class="grid-item"></div>

      <!-- 4 -->
      <div class="grid-item"></div>
      <div class="grid-item"></div>
      <div class="grid-item"></div>
      <div class="grid-item"></div>
      <div class="grid-item span-2 info green">
        <p>
          tuesday
        </p>
        <p>
          november 17 1992
        </p>
        <p>
          10pm
        </p>
      </div>
      <div class="grid-item"></div>
      <div class="grid-item"></div>
      <div class="grid-item"></div>
      <div class="grid-item"></div>
      
      <!-- 5 -->
      <div class="grid-item"></div>
      <div class="grid-item"></div>
      <div class="grid-item span-2 title white">
        <p>
          the
        </p>
      </div>
      <div class="grid-item span-2 info pink">
        <p>
          at limelight
        </p>
        <p>
          660 6th ave.
        </p>
        <p>
          new york city
        </p>
      </div>
      <div class="grid-item span-2 info pink">
        <p>
          admission $12.50
        </p>
        <p>
          18 to enter
        </p>
        <p>
          21 plus to drink
        </p>
      </div>
      <div class="grid-item"></div>
      <div class="grid-item"></div>

      <!-- 6 -->
      <div class="grid-item"></div>
      <div class="grid-item"></div>
      <div class="grid-item span-6 title white">
        <p>
          sugarcubes
        </p>
      </div>
      <div class="grid-item"></div>
      <div class="grid-item"></div>

      <!-- 7 -->
      <div class="grid-item"></div>
      <div class="grid-item"></div>
      <div class="grid-item"></div>
      <div class="grid-item white"></div>
      <div class="grid-item"></div>
      <div class="grid-item"></div>
      <div class="grid-item"></div>
      <div class="grid-item"></div>
      <div class="grid-item"></div>
      <div class="grid-item"></div>

      <!-- 8 -->
      <div class="grid-item"></div>
      <div class="grid-item"></div>
      <div class="grid-item white"></div>
      <div class="grid-item"></div>
      <div class="grid-item"></div>
      <div class="grid-item"></div>
      <div class="grid-item"></div>
      <div class="grid-item"></div>
      <div class="grid-item"></div>
      <div class="grid-item"></div>

      <!-- 9 -->
      <div class="grid-item"></div>
      <div class="grid-item"></div>
      <div class="grid-item"></div>
      <div class="grid-item"></div>
      <div class="grid-item"></div>
      <div class="grid-item"></div>
      <div class="grid-item"></div>
      <div class="grid-item"></div>
      <div class="grid-item"></div>
      <div class="grid-item"></div>
      
      <!-- 10 -->
      <div class="grid-item"></div>
      <div class="grid-item"></div>
      <div class="grid-item"></div>
      <div class="grid-item"></div>
      <div class="grid-item"></div>
      <div class="grid-item"></div>
      <div class="grid-item"></div>
      <div class="grid-item"></div>
      <div class="grid-item"></div>
      <div class="grid-item"></div>
    </div>
  </section>

</body>

<!-- JS for generating background grid -->
<script type="module">
  const backgroundGridSize = 20; // rows & cols
  const posterGridSize = 10; // rows & cols
  const backgroundGridElement = document.getElementsByClassName('background-grid')[0];

  function getRandomNumber(min, max) { // min and max included 
    return Math.floor(Math.random() * (max - min + 1) + min);
  }

  function getRandomColor() {
    // adding green (#00b2a2) multiple times to increase odds of it appearing
    const colors = ['#00b2a2', '#00b2a2', '#00b2a2', '#00b2a2', '#00b2a2', '#ee137f', '#000000', '#ffffff'];
    return colors[getRandomNumber(0, colors.length - 1)];
  }

  function isWithinPoster(row, col) {
    // posterGridSize + 2 because poster has one grid line space around it
    const gridDifference = ((backgroundGridSize) - (posterGridSize + 2)) / 2;
    return (
      (col >= gridDifference && col < backgroundGridSize - gridDifference) &&
      (row >= gridDifference && row < backgroundGridSize - gridDifference)
    );
  }
  
  for(let row = 0; row < backgroundGridSize; row++) {
    for(let col = 0; col < backgroundGridSize; col++) {
      if (!isWithinPoster(row, col)) {
        const gridItem = document.createElement('div');
        gridItem.classList.add('background-grid-item');
        gridItem.style.gridArea = `${row + 1} / ${col + 1}`;
        gridItem.style.borderColor = getRandomColor();
        backgroundGridElement.appendChild(gridItem);
      }
    }
  }
</script>

<!-- JS for constructing 3d grid-item html -->
<script type="module">
  const gridItems = document.getElementsByClassName('grid-item');

  Array.from(gridItems).forEach(element => {
    const sceneClasses = Array.from(element.classList).filter(c => c.startsWith('span'));
    const gridItemClasses = Array.from(element.classList).filter(c => !c.startsWith('span'));

    const gridItemScene = document.createElement('div');
    gridItemScene.classList.add('grid-item-scene');
    sceneClasses.forEach(c => gridItemScene.classList.add(c));
    
    const gridItemInner = document.createElement('div');
    gridItemInner.classList.add('grid-item-inner');
    
    const gridItem = document.createElement('div');
    gridItemClasses.forEach(c => gridItem.classList.add(c));
    gridItem.innerHTML = element.innerHTML;
    
    const gridItemBackside = document.createElement('div');
    gridItemBackside.classList.add('grid-item-backside');
  
    gridItemInner.appendChild(gridItem);
    gridItemInner.appendChild(gridItemBackside);
    gridItemScene.appendChild(gridItemInner);
    element.replaceWith(gridItemScene);
  });
</script>

<!-- JS for triggering entrance animation -->
<script type="module">
  const gridItemInners = document.getElementsByClassName('grid-item-inner');

  Array.from(gridItemInners).forEach((element, i) => {
    setTimeout(() => element.classList.add('flipped'), 20 * i);
  });
</script>

</html>